"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[980],{9980:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(7757),r=n.n(a);function i(e,t,n,a,r,i,s){try{var u=e[i](s),o=u.value}catch(e){return void n(e)}u.done?t(o):Promise.resolve(o).then(a,r)}const s={name:"ServiceRequests",data:function(){return{items:[],headers:[{text:"#",value:"index"},{text:"Resident",value:"residentName"},{text:"Service",value:"serviceName"},{text:"Price",value:"servicePrice"},{text:"Villa",value:"villaNumber"},{text:"Status",value:"requestStatus"},{text:"Actions",value:"actions",sortable:!1}],loading:!0,page:1,pageCount:0,itemsPerPage:10}},created:function(){this.fetchServiceRequests()},methods:{fetchServiceRequests:function(){var e,t=this;return(e=r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("https://api.test.kaplankaya.app/api/web/services/requests",{params:{PageNumber:1,PageSize:1e4}}).then((function(e){t.items=e.data.data,t.loading=!1,console.log(t.items)}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var s=e.apply(t,n);function u(e){i(s,a,r,u,o,"next",e)}function o(e){i(s,a,r,u,o,"throw",e)}u(void 0)}))})()},editItem:function(e){this.$router.push({name:"service_requests_edit",params:{id:e.id,resident_id:e.residentId}})},goToChat:function(e){this.$router.push({name:"chat",params:{id:e.id}})},getStatus:function(e){return 1===e?"New":2===e?"Accepted":3===e?"Payment expected":4===e?"Completed":"Canceled"},getStatusColor:function(e){return 1===e?"green":2===e?"amber":3===e?"purple":4===e?"blue":"red"}}};const u=(0,n(1900).Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-row",[n("v-col",{staticClass:"d-flex justify-space-between align-center"},[n("h1",[e._v("Service requests")]),e._v(" "),n("div",[n("v-btn",{attrs:{color:"brand",dark:"",to:"service-requests/create"}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("\n                    Add request\n                ")],1)],1)])],1),e._v(" "),n("v-row",[n("v-col",[n("div",{staticClass:"text-center pt-2 pb-5"},[n("v-pagination",{attrs:{color:"brand",length:e.pageCount},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),e._v(" "),n("v-data-table",{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{headers:e.headers,items:e.items,page:e.page,"items-per-page":e.itemsPerPage,loading:e.loading,"loading-text":"Loading... Please wait","hide-default-footer":""},on:{"update:page":function(t){e.page=t},"page-count":function(t){e.pageCount=t}},scopedSlots:e._u([{key:"item.index",fn:function(t){var n=t.index;return[e._v("\n                    "+e._s(n+1)+"\n                ")]}},{key:"item.title",fn:function(t){var a=t.item;return[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(a.title))])]}},{key:"item.requestStatus",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{label:"",small:"",dark:"",color:e.getStatusColor(a.requestStatus)}},[e._v("\n                        "+e._s(e.getStatus(a.requestStatus))+"\n                    ")])]}},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v("\n                        mdi-pencil\n                    ")]),e._v(" "),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.goToChat(a)}}},[e._v("\n                        mdi-chat\n                    ")])]}}])})],1)],1)],1)}),[],!1,null,null,null).exports}}]);