"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[841],{9841:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(7757),l=a.n(n);const s={name:"ResidentModal",props:{dialog:Boolean,resident:Object},data:function(){return{loading_reg:!1}},computed:{fullName:function(){return this.resident.lastName+" "+this.resident.firstName},status:function(){return 1===this.resident.status?"Confirmed":"New"},statusColor:function(){return 1===this.resident.status?"amber":"green"},villaAddress:function(){return this.resident.address?this.resident.address.house.street.name+", "+this.resident.address.house.name:""},villaApartment:function(){return this.resident.address?this.resident.address.apartment:""}},methods:{regenerateResident:function(){this.loading_reg=!0}}};var i=a(1900);function r(e,t,a,n,l,s,i){try{var r=e[s](i),o=r.value}catch(e){return void a(e)}r.done?t(o):Promise.resolve(o).then(n,l)}const o={name:"Residents",components:{ResidentModal:(0,i.Z)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{disabled:e.loading_reg,loading:e.loading_reg}},[a("v-card-title",{staticClass:"mb-2"},[e._v("\n                "+e._s(e.fullName)+"\n            ")]),e._v(" "),a("v-card-subtitle",[a("v-chip",{attrs:{label:"",small:"",dark:"",color:e.statusColor}},[e._v("\n                    "+e._s(e.status)+"\n                ")])],1),e._v(" "),a("v-card-text",[a("v-row",[a("v-col",[a("h4",[e._v("Phone")]),e._v("\n                        "+e._s(e.resident.numberPhone)+"\n                    ")]),e._v(" "),a("v-col",[a("h4",[e._v("Email")]),e._v("\n                        "+e._s(e.resident.email)+"\n                    ")])],1),e._v(" "),a("v-row",[a("v-col",[a("h4",[e._v("Villa number")]),e._v("\n                        "+e._s(e.resident.villaNumber)+"\n                    ")])],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.$emit("close-modal")}}},[e._v("\n                    Close\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{items:[],headers:[{text:"#",value:"index"},{text:"Name",value:"fullName"},{text:"Phone",value:"numberPhone"},{text:"Email",value:"email"},{text:"Villa",value:"villaNumber"}],loading:!0,page:1,pageCount:0,itemsPerPage:10,fullName:null,phone:null,email:null,addresses:[],address:null,villa:null,roles:[],role:null,statuses:[{name:"Confirmed",value:1},{name:"New",value:0}],status:null,dialog:!1,resident:{}}},created:function(){this.fetchResidents()},methods:{fetchResidents:function(){var e,t=this;return(e=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("https://api.test.kaplankaya.app/api/web/residents",{params:{OSIId:t.$store.state.user_id,PageNumber:1,PageSize:1e4,FullName:t.fullName,NumberPhone:t.phone,VillaNumber:t.villa}}).then((function(e){t.items=e.data.data,t.loading=!1})).catch((function(e){t.loading=!1,t.$store.dispatch("showAlert",{isVisible:!0,msg:e.response.data.Message,color:"error",type:"error"})}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,l){var s=e.apply(t,a);function i(e){r(s,n,l,i,o,"next",e)}function o(e){r(s,n,l,i,o,"throw",e)}i(void 0)}))})()},openModal:function(e){this.resident=e,this.dialog=!0},closeModal:function(){this.resident={},this.dialog=!1},getStatus:function(e){return 1===e?"Confirmed":"New"}}};const d=(0,i.Z)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",{staticClass:"d-flex justify-space-between align-center"},[a("h1",[e._v("Residents")])])],1),e._v(" "),a("v-row",[a("v-col",[a("v-row",[a("v-col",{staticClass:"mb-n4",attrs:{cols:"6",lg:"3"}},[a("v-text-field",{attrs:{placeholder:"Full name",outlined:"",dense:"",clearable:""},on:{change:e.fetchResidents},model:{value:e.fullName,callback:function(t){e.fullName=t},expression:"fullName"}})],1),e._v(" "),a("v-col",{staticClass:"mb-n4",attrs:{cols:"6",lg:"3"}},[a("v-text-field",{attrs:{placeholder:"Phone number",outlined:"",dense:"",clearable:""},on:{change:e.fetchResidents},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),a("v-col",{staticClass:"mb-n4",attrs:{cols:"6",lg:"3"}},[a("v-text-field",{attrs:{placeholder:"Email",outlined:"",dense:"",clearable:""},on:{change:e.fetchResidents},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),a("v-col",{staticClass:"mb-n4",attrs:{cols:"6",lg:"3"}},[a("v-text-field",{attrs:{placeholder:"Villa",outlined:"",dense:"",clearable:""},on:{change:e.fetchResidents},model:{value:e.villa,callback:function(t){e.villa=t},expression:"villa"}})],1)],1),e._v(" "),a("div",{staticClass:"text-center pt-2 pb-5"},[a("v-pagination",{attrs:{color:"brand",length:e.pageCount},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),e._v(" "),a("v-data-table",{staticClass:"elevation-1",staticStyle:{cursor:"pointer"},attrs:{headers:e.headers,items:e.items,page:e.page,"items-per-page":e.itemsPerPage,loading:e.loading,"loading-text":"Loading... Please wait","hide-default-footer":""},on:{"update:page":function(t){e.page=t},"page-count":function(t){e.pageCount=t},"click:row":e.openModal},scopedSlots:e._u([{key:"item.index",fn:function(t){var a=t.index;return[e._v("\n                    "+e._s(a+1)+"\n                ")]}}])})],1)],1),e._v(" "),a("resident-modal",{attrs:{dialog:e.dialog,resident:e.resident},on:{"close-modal":e.closeModal}})],1)}),[],!1,null,null,null).exports}}]);