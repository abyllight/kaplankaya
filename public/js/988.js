"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[988],{9988:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(7757),s=a.n(r);const n={name:"ServiceItemsTab",props:{items:Array,type:Number},methods:{editService:function(e){this.$router.push({name:"services_edit",params:{id:e}})}}};var i=a(1900);function c(e,t,a,r,s,n,i){try{var c=e[n](i),o=c.value}catch(e){return void a(e)}c.done?t(o):Promise.resolve(o).then(r,s)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(r,s){var n=e.apply(t,a);function i(e){c(n,r,s,i,o,"next",e)}function o(e){c(n,r,s,i,o,"throw",e)}i(void 0)}))}}const l={name:"Services",components:{ServiceItemsTab:(0,i.Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mt-4"},[a("v-row",[a("v-col",[0===e.items.length?a("p",[e._v("No services found")]):e._l(e.items,(function(t,r){return a("v-sheet",{key:t.name,staticClass:"pa-4 mb-3 d-flex align-center justify-space-between text-sm-body-2",staticStyle:{cursor:"pointer"},attrs:{color:"grey lighten-4"},on:{click:function(a){return e.editService(t.id)}}},[a("div",{staticClass:"d-flex align-center"},[a("span",{staticClass:"font-weight-bold mb-0 mr-3"},[e._v(e._s(r+1))]),e._v(" "),a("p",{staticClass:"mb-0"},[e._v(e._s(t.name))])]),e._v(" "),0===e.type?a("v-icon",[e._v("\n                    mdi-chevron-right\n                ")]):e._e()],1)}))],2)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{categories:[],category_id:null,category_name:null,c_id:0,services:[],requests:[],bills:[],dialog:!1,selectedItem:1,type:0,extra:[{name:"Requests",type:1},{name:"Bills",type:2}]}},created:function(){this.fetchCategories()},methods:{fetchCategories:function(){var e=this;return o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("https://api.test.kaplankaya.app/api/web/services/categories",{params:{PageNumber:1,PageSize:1e4}}).then((function(t){e.categories=t.data.data,e.category_id=e.categories[0].id,e.category_name=e.categories[0].name,e.c_id=0,e.fetchServices()}));case 2:case"end":return t.stop()}}),t)})))()},fetchServices:function(){var e=this;return o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("https://api.test.kaplankaya.app/api/web/services",{params:{Categoryid:e.category_id,PageNumber:1,PageSize:1e4}}).then((function(t){e.services=t.data.data}));case 2:case"end":return t.stop()}}),t)})))()},fetchServiceRequests:function(){var e=this;return o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("https://api.kaplankaya.app/api/ServiceRequests/GetAll",{params:{PageNumber:1,PageSize:1e4}}).then((function(t){e.services=t.data.data,console.log(e.services)}));case 2:case"end":return t.stop()}}),t)})))()},fetchServiceBills:function(){var e=this;return o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("https://api.kaplankaya.app/api/Bill/GetAll",{params:{PageNumber:1,PageSize:1e4}}).then((function(t){e.services=t.data.data,console.log("bills",e.services)}));case 2:case"end":return t.stop()}}),t)})))()},fetchCategoryById:function(e){var t=this;return o(s().mark((function a(){return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,axios.get("https://api.kaplankaya.app/api/Category/GetById",{params:{Id:e}}).then((function(e){t.fetchServices()}));case 2:case"end":return a.stop()}}),a)})))()},chooseCategory:function(e,t){this.type=0,this.category_id=e.id,this.category_name=e.name,this.c_id=t,this.fetchServices()},editCategory:function(e){this.$router.push({name:"categories_edit",params:{id:e.id}})},chooseExtra:function(e){this.type=e.type,1===this.type?this.fetchServiceRequests():2===this.type&&this.fetchServiceBills()}}};const u=(0,i.Z)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",{attrs:{sm:"12",lg:"3"}},[a("div",{staticClass:"d-flex align-center justify-space-between"},[a("h2",[e._v("Categories")]),e._v(" "),a("v-btn",{attrs:{color:"brand",dark:"",to:"/categories/create"}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("\n                     add\n                 ")],1)],1),e._v(" "),a("div",{staticClass:"mt-8"},[0===e.categories.length?a("div",[a("v-skeleton-loader",{attrs:{type:"paragraph"}})],1):a("div",e._l(e.categories,(function(t,r){return a("v-sheet",{key:t.name,staticClass:"pa-3 mb-3 d-flex align-center justify-space-between",class:e.c_id===r?"blue-grey lighten-3":"grey lighten-4",staticStyle:{cursor:"pointer"},attrs:{rounded:"lg",color:"blue-grey lighten-3"},on:{click:function(a){return e.chooseCategory(t,r)}}},[a("h6",[e._v(e._s(t.name))]),e._v(" "),a("v-icon",{attrs:{small:""},on:{click:function(a){return e.editCategory(t)}}},[e._v("mdi-pencil")])],1)})),1)])]),e._v(" "),a("v-col",[a("div",{staticClass:"d-flex align-center justify-space-between mb-10"},[a("h4",[e._v(e._s(e.category_name))]),e._v(" "),a("v-btn",{attrs:{color:"brand",dark:"",to:"/services/create"}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-plus")]),e._v("\n                     add service\n                 ")],1)],1),e._v(" "),a("div",{staticClass:"mt-4"},[0===e.categories.length?a("div",[a("v-skeleton-loader",{attrs:{type:"paragraph"}})],1):a("div",[a("service-items-tab",{attrs:{type:e.type,items:e.services}})],1)])])],1)],1)}),[],!1,null,null,null).exports}}]);